<!DOCTYPE html>
<html>
	<head>
		<title>Chord Progressions</title>
	<meta charset="utf-8" />
	</head>
	<style type="text/css">
			body { 
				font-family:sans-serif;
				font-size: 35px;
			}
			li { 
				padding:2px; 
			}
			div.heading {
				text-decoration: none;
				font-family:sans-serif;
				font-size:large;
				color:black;
				margin:0px 0px; 
			}
			h1 {
				margin:0px 0px; 
			}
			div.heading a:link {
				text-decoration: none;
				font-family:sans-serif;
				color:black;
			}

			div.heading a:visited {
				text-decoration: none;
				font-family:sans-serif;
				color:black;
			}

			div.heading a:hover {
				text-decoration: underline;
				font-family:sans-serif;
				color:black;
			}

			div.heading a:active {
				text-decoration: underline;
				font-family:sans-serif;
				color:black;
			}
			div.explanation {
				text-decoration: none;
				font-family:sans-serif;
				font-size:small;
				margin:0px 20px; 
				color:black;
				width:500px;
			}
			div.explanation a:link {
				text-decoration: none;
				font-family:sans-serif;
			}

			div.explanation a:visited {
				text-decoration: none;
				font-family:sans-serif;
			}

			div.explanation a:hover {
				text-decoration: underline;
				font-family:sans-serif;
			}

			div.explanation a:active {
				text-decoration: underline;
				font-family:sans-serif;
			}
			div.majorlink { 
				margin:0px 50px; 
				font-family:sans-serif;
				font-size:medium;
				color:blue;
			}
			div.majorlink a:link {
				text-decoration: none;
				font-family:sans-serif;
				color:blue;
			}

			div.majorlink a:visited {
				text-decoration: none;
				font-family:sans-serif;
				color:blue;
			}

			div.majorlink a:hover {
				text-decoration: underline;
				font-family:sans-serif;
				color:blue;
			}

			div.majorlink a:active {
				text-decoration: underline;
				font-family:sans-serif;
				color:blue;
			}
			
body > .toolbar {
    box-sizing: border-box;
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    border-bottom: 1px solid #2d3642;
    border-top: 1px solid #6d84a2;
    padding: 10px;
    height: 45px;
    background: url(../../iui/toolbar.png) #6d84a2 repeat-x;
}

.toolbar > h1 {
    position: absolute;
    overflow: hidden;
    left: 50%;
    margin: 1px 0 0 -75px;
    height: 45px;
    font-size: 20px;
    width: 150px;
    font-weight: bold;
    text-shadow: rgba(0, 0, 0, 0.4) 0px -1px 0;
    text-align: center;
    text-overflow: ellipsis;
    white-space: nowrap;
    color: #FFFFFF;
}

.button {
    position: absolute;
    overflow: hidden;
    top: 8px;
    right: 6px;
    margin: 0;
    border-width: 0 5px;
    padding: 0 3px;
    width: auto;
    height: 30px;
    line-height: 30px;
    font-family: inherit;
    font-size: 12px;
    font-weight: bold;
    color: #FFFFFF;
    text-shadow: rgba(0, 0, 0, 0.6) 0px -1px 0;
    text-overflow: ellipsis;
    text-decoration: none;
    white-space: nowrap;
    background: none;
    -webkit-border-image: url(../../iui/toolButton.png) 0 5 0 5;
}

#backButton {
    display: none;
    left: 6px;
    right: auto;
    padding: 0;
    max-width: 55px;
    border-width: 0 8px 0 14px;
    margin-top: 8px;
    margin-left: 10px;
    -webkit-border-image: url(../../iui/backButton.png) 0 8 0 14;
}

.content {
	margin-left: 50px;
	padding: 50px;
}

table, tr, td {
    border: none;
	text-align: left;
				text-decoration: none;
				font-family:sans-serif;
				font-size:small;
				margin:0px 20px; 
				color:black;
				width:500px;
}

	</style>
	<body>

		<div class="content">

			<div class="heading">
				<h1>
					Chord Progressions
				</h1>
			</div>

			<div class="explanation">
				<p>
					<a href="https://peterburk.github.io" target=_blank>Peter Burkimsher</a>
				</p>
				<p>
					2017-10-17 to 2017-11-17
				</p>
				<p>
					<a href="mailto:peterburk@gmail.com">peterburk@gmail.com</a>
				</p>			
			</div>

			<p>
			</p>

			<div class="explanation">
				<h2>
					<a href="ChordProgressions.zip" target=_blank>Download the whole dataset here</a>
				</h2>
			</div>

			<p>
			</p>

			<div class="explanation">
				<p>
	If you've never heard the Four Chord Song by Axis of Awesome, watch that first. 
				</p>
				<p>
					<a href="https://www.youtube.com/watch?v=5pidokakU4I" target=_blank>https://www.youtube.com/watch?v=5pidokakU4I</a>
				</p>
				<p>
	The comedy song is funny because there are so many songs that sound the same. There is even a list on Wikipedia. 
				</p>
				<p>
					<a href="https://en.wikipedia.org/wiki/List_of_songs_containing_the_I–V–vi–IV_progression" target=_blank>https://en.wikipedia.org/wiki/List_of_songs_containing_the_I–V–vi–IV_progression</a>
				</p>
			</div>
		
			<p>
			</p>

			<div class="explanation">
				<p>
					In this article, I'll try to answer 3 questions. 
				</p>
				<p>
					<b>
						<a href="#1">1. Why do some songs sound the same?</a>
					</b>
				</p>
				<p>
					<b>
						<a href="#2">2. Can I find new songs that go well together?</a>
					</b>
				</p>
				<p>
					<b>
						<a href="#3">3. How do we use music theory to improve machine learning?</a>
					</b>
				</p>
			</div>

			<p>
			</p>

			<div class="explanation">
				<p>
					Disclaimer: I can't play an instrument, and everything I know about music theory is written in this blog post. 
				</p>
			</div>

			<div class="heading" id="1">
				<h3>
					1. Why do some songs sound the same? 
				</h3>
			</div>

			<div class="explanation">
				<p>
					<b>
						<a href="#1a">a. Parsons Code</a>
					</b>
				</p>
				<p>
					<b>
						<a href="#1b">b. Notes</a>
					</b>
				</p>
				<p>
					<b>
						<a href="#1c">c. Octaves</a>
					</b>
				</p>
				<p>
					<b>
						<a href="#1d">d. Chords</a>
					</b>
				</p>
				<p>
					<b>
						<a href="#1e">e. Roman Numerals</a>
					</b>
				</p>
				<p>
					<b>
						<a href="#1f">f. Chord Progressions</a>
					</b>
				</p>
				<p>
					<b>
						<a href="#1g">g. Key</a>
					</b>
				</p>
				<p>
					<b>
						<a href="#1h">h. Summary</a>
					</b>
				</p>
			</div>
			
			<div class="explanation">
				<p>
	Music is not random. The links in the title talk about the I–V–vi–IV progression, but that's not the only common chord progression. 
				</p>
				<p>
	The 2.4.1.5 II-IV-I-V "Wonderwall" progression has some of my favourite songs. 
				</p>
					<a href="https://www.youtube.com/watch?v=gSKlaHf2PH4" target=_blank>Forget December - Something Corporate</a>, <a href="https://www.youtube.com/watch?v=40V9_1PMUGM" target=_blank>Gone Away - The Offspring</a>, and <a href="https://www.youtube.com/watch?v=ysSxxIqKNN0" target=_blank>New Divide - Linkin Park</a>. 
				</p>
				<p>
	Other songs that sound similar include:
				</p>
				<p>
					<a href="https://www.youtube.com/watch?v=yRYFKcMa_Ek" target=_blank>Maneater - Hall & Oates</a>, <a href="https://www.youtube.com/watch?v=jN2AdOjI4FI" target=_blank>Part Time Lover - Stevie Wonder</a>. 
				</p>
				<p>
	There's a list of Suspiciously Similar Songs. 
				</p>
				<p>
					<a href="http://tvtropes.org/pmwiki/pmwiki.php/SuspiciouslySimilarSong/Music" target=_blank>http://tvtropes.org/pmwiki/pmwiki.php/SuspiciouslySimilarSong/Music</a>
				</p>
			</div>

			<div class="heading" id="1a">
				<h5>
	a. Parsons Code
				</h5>
			</div>
			
			<div class="explanation">
				<p>
	Listen to a song you like, and drum your fingers. 
				</p>
				<p>
	I'm using my right hand to represent the chord progression, even though I can't play an instrument. 
				</p>
				<p>
	I can "play" 4 different "notes" using my hand: index finger, middle finger, ring finger, and little finger. 
				</p>
				<p>
	When the "note" sounds "higher", I tap a finger on the right (towards the little finger), "up". 
				</p>
				<p>
	When the "note" sounds "lower", I tap a finger on the left (towards the thumb), "down". 
				</p>
				<p>
	When the "note" sounds the same, I tap the same finger again, "repeat". 
				</p>
			</div>
			<p>
			</p>
			<div class="explanation">
				<p>
	This is called <i>Parsons Code</i>. 
				</p>
				<p>
	There are 3 possibilities: up, down, or repeat. 
				</p>
				<p>
	We learned from Axis Of Awesome that most songs use 4 chords. 
				</p>
				<p>
	If you generate all the possibilities (<a href="Parsons/ParsonsAll.txt" target=_blank>ParsonsAll.txt</a> in my dataset), there are 81 Parsons codes. 
				</p>
				<p>
	rrrr
				</p>
				<p>
	rrrd
				</p>
				<p>
	...
				</p>
				<p>
	dudu
				</p>
				<p>
	...
				</p>
				<p>
	uuuu
				</p>
			</div>
			<p>
			</p>
			<div class="explanation">
				<p>
	That means every song in the world sounds like one of those 81 codes!
				</p>
				<p>
	Not so many, right? Why not generate all of them, listen to choose the ones I like, and find more songs!
				</p>
				<p>
	That's covered in my answers to questions 2 and 3. It gets more complicated, as we will see. 
				</p>
			</div>

			<div class="heading" id="1b">
				<h5>
	b. Notes
				</h5>
			</div>

			<div class="explanation">
				<p>
	What if there's a difference between going "up" a lot and "up" a little?
				</p>
				<p>
	To understand this, we need to learn some basic music theory. 
				</p>
				<p>
	It will help to have the Scientific Pitch Notation table open in another tab. 
				</p>
				<p>
					<a href="https://en.wikipedia.org/wiki/Scientific_pitch_notation#Table_of_note_frequencies" target=_blank>https://en.wikipedia.org/wiki/Scientific_pitch_notation#Table_of_note_frequencies</a>
				</p>
				<p>
	There are 12 "levels" - C, C#, D, D#, E, F, F#, G, G#, A, A#, B. These "levels" are called "notes". 
				</p>
				<p>
	For some reason I don't totally understand, some have 2 names (e.g. C#=Db, D#=Eb, F#=Gb, A#=Bb). 
				</p>
				<p>
	There is also no E#. It just doesn't exist. Get used to it. Those are the 12 notes. 
				</p>
			</div>

			<div class="heading" id="1c">
				<h5>
	c. Octaves
				</h5>
			</div>

			<div class="explanation">
				<p>
	Haha, they aren't only 12 notes. 
				</p>
				<p>
	The pattern of the 12 notes repeats and wraps around (after the last B there's another C, then C#, and so on). 
				</p>
				<p>
	You can move up an "Octave", which means going from one "C" to the next "C", which is 12 notes higher. 
				</p>
				<p>
	MIDI is a wonderful computer standard that makes all the notes fit into 128 numbers. 
				</p>
				<p>
	There are 11 possible notes called "C" that can be represented in MIDI. 
				</p>
			</div>

			<div class="heading" id="1c">
				<h5>
	d. Chords
				</h5>
			</div>

			<div class="explanation">
				<p>
	Musicians never play notes one at a time. They always use chords. 
				</p>
				<p>
	A chord is 3 notes played at the same time. 
				</p>
				<p>
	There is a chord called "C major", but it's totally different to the note called "C". 
				</p>
				<p>
	The notes in "C" are C,E,G. 
				</p>
				<p>
	There's also a chord called "C minor". 
				</p>
				<p>
	The notes in "Cm" are C,D#,G. 
				</p>
				<p>
	Remember that D#=Eb (section <a href="#1b">1.b.</a> of this article)? 
				</p>
				<p>
	You can also say that the notes in the chord "Cm" are C,Eb,G.
				</p>
			</div>
			<p>
			</p>
			<div class="explanation">
				<p>
	There's also 7th chords, Augmented chords (+), and Diminished (º) chords. 
				</p>
				<p>
	As far as we're concerned, there's a <a href="http://www.michael-thomas.com/music/class/chords_notesinchords.htm" target=_blank>lookup table</a> that lets us turn these chords into notes. 
				</p>
				<p>
	Thank you to Yi-Shing Chung for helping me to understand notes and chords!
				</p>
			</div>
			

			<div class="heading" id="1e">
				<h5>
	e. Roman Numerals
				</h5>
			</div>

			<div class="explanation">
				<p>
	Finally we can understand what the I–V–vi–IV progression means!
				</p>
				<p>
	There are 7 different Roman Numerals. The uppercase/lowercase doesn't matter. 
				</p>
				<p>
	For a "major key", the Roman Numerals are: I, ii, iii, IV, V, vi, viiº. 
				</p>
				<p>
	For a "minor key", the Roman Numerals are: i, iiº, III, iv, v, VI, VII. 
				</p>
				<p>
	Let's just use numbers 1, 2, 3, 4, 5, 6, 7. 
				</p>
				<p>
	I–V–vi–IV means 1.5.6.4. 
				</p>
			</div>
 
			<div class="heading" id="1f">
				<h5>
	f. Chord Progressions
				</h5>
			</div>

			<div class="explanation">
				<p>
	We just learned that I–V–vi–IV is a common chord progression, and it can also be written 1.5.6.4. 
				</p>
				<p>
	If you want to find similar songs, you can search the HookTheory database. Just put the numbers into the URL. 
				</p>
				<p>
	<a href="https://www.hooktheory.com/trends#node=1.5.6.4&key=C" target=_blank>https://www.hooktheory.com/trends#node=1.5.6.4&key=C</a>
				</p>
				</p>
				<p>
	For a four-chord song, we can make all the possibilities:
				</p>
				<p>
	1.1.1.1
				</p>
				<p>
	1.1.1.2
				</p>
				<p>
	...
				</p>
				<p>
	1.5.6.4
				</p>
				<p>
	...
				</p>
				<p>
	7.7.7.7
				</p>
				<p>
	There are 2401 possible chord progressions. That's still not so many. Let's generate them all! 
				</p>
				<p>
	The list is in <a href="ChordProgressionsAll.txt" target=_blank>ChordProgressionsAll.txt</a>. 
				</p>
				<p>
	If you know the chord progression and want to know the Parsons code, that data is in Parsons Chord Progressions.txt. 
				</p>
			</div>

			<div class="heading" id="1g">
				<h5>
	g. Key
				</h5>
			</div>
			
			<div class="explanation">
				<p>
	To get the notes, we need to know the chords. 
				</p>
				<p>
	To get the chords, we need to know the Roman Numerals and the key. 
			</div>

			<img src="Images/Chords%20and%20Keys.jpg" width="400px"></img>

			<div class="explanation">
				<p>
	What's a key?
				</p>
				<p>
	The chord progression 1.5.6.4 = I–V–vi–IV in the "key of C" is C-G-Am-F. 
				</p>
				<p>
	In the "key of G", 1.5.6.4 is the chords G-D-Em-C. 
				</p>
				<p>
	If you change from one "key" to another, you "transpose" the chords. 
				</p>
				<p>
	It is possible to "transpose" chords to Roman Numerals, or Roman Numerals to chords. 
				</p>
				<p>
	It is also possible to transpose from a "minor key" to a "major key". That turns sad songs into happy songs. 
				</p>
				<p>
	<a href="http://theweek.com/articles/467109/sad-songs-made-happy-amazing-art-turning-minorkey-songs-major" target=_blank>http://theweek.com/articles/467109/sad-songs-made-happy-amazing-art-turning-minorkey-songs-major</a>
				</p>
			</div>
			<img src="Images/music_chords_in_the_key_of_a_b_c_d_e_f_g_flat_sharp_minor-727x1024.png" width="200px"></img>

			<div class="explanation">
				<p>
	There are 30 possible keys:
				</p>
				<p>
	"A", "Am", "Ab", "Abm", "A#m", "B", "Bm", "Bb", "Bbm", "C", "Cm", "C#", "C#m", "Cb", "D", "Dm", "D#m", "Db", "E", "Em", "Eb", "Ebm", "F", "Fm", "F#", "F#m", "G", "Gm", "Gb", "G#m". 
				</p>
				<p>
	When you transpose, you actually shift the base line of the Scientific Pitch Notation table from 1.b. 
				</p>
				<p>
	That table is in the key of "C". The table goes from C to B. It looks like "D" is "higher" than "C". 
				</p>
				<p>
	But if you transpose the table, then the table goes from "D" to "C". Now "D" is "lower" than "C". 
				</p>
				<p>
	There are some problems when moving the MIDI table, because some notes don't exist in the lowest or highest octave. 
				</p>
				<p>
	Every note in every key exists in at least 7 octaves. You can't really hear the high and low octaves anyway. 
				</p>
				<p>
	If you don't transpose the table, the Parsons code for a chord progression will be different when changing the key. 
				</p>
				<p>
	That means it sounds different, which can't be right. So we must transpose the chord table first. 
				</p>
				<p>
	Thank you to Lenard Chuang for helping me figure out how to transpose correctly!
				</p>
			</div>

				<p>
				</p>

			<div class="explanation">
				<p>
	Now let's go back to the Parsons code. 
				</p>
				<p>
	I generated all the Parsons codes for all the possible chord progressions. 
				</p>
				<p>
	See the <a href="Parsons/ProgressionsByParsons.zip" target=_blank>ProgressionsByParsons</a> folder for this data. 
				</p>
				<p>
	Some Parsons codes have more chord progressions (dudu and udud). 
				</p>
				<p>
	What's weird is that some possible Parsons codes (e.g. ruur) are not possible using standard chord progressions. 
				</p>
				<p>
	That data is in <a href="Parsons/ParsonsOnlyTheoretical.txt" target=_blank>ParsonsOnlyTheoretical.txt</a>. 
				</p>
				<p>
	All the Parsons codes that are actually used in chord progressions are in <a href="Parsons/ParsonsReal.txt" target=_blank>ParsonsReal.txt</a>. 
				</p>
			</div>

			<div class="heading" id="1h">
				<h5>
	h. Summary
				</h5>
			</div>

			<div class="explanation">
				<p>
	"C" can mean 3 different things: a note, a chord, and a key. They're totally different to each other. 
				</p>
				<p>
	We have 30 keys * 7 octaves = 210 ways to play the same chord progression. 
				</p>
				<p>
	We also have 2401 chord progressions. 
				</p>
				<p>
	So that's a total of 504,210 tunes. 
				</p>
				<p>
	Let's generate them all! 
				</p>
			</div>


			<div class="heading" id="2">
				<h3>
					2. Can I find new songs that go well together? 
				</h3>
			</div>
			
						
			<div class="explanation">
				<p>
					<b>
	<a href="#2a">a. Cheer me up</a>
					</b>
				</p>
				<p>
					<b>
	<a href="#2b">b. Compare chord progressions</a>
					</b>
				</p>
				<p>
					<b>
	<a href="#2c">c. Extracting chords from MP3s</a>
					</b>
				</p>
				<p>
					<b>
	<a href="#2d">d. Comparing frequencies</a>
					</b>
				</p>
			</div>
			

			<div class="heading" id="2a">
				<h5>
	a. Cheer me up
				</h5>
			</div>

			<div class="explanation">
				<p>
	<a href="https://www.youtube.com/watch?v=EAS-pvQ06s4" target=_blank>Closing Time - Semisonic</a> and <a href="https://www.youtube.com/watch?v=5ZYgIrqELFw" target=_blank>All Star - Smash Mouth</a> sound really similar, and make a great mashup. 
				</p>
				<p>
	<a href="https://www.youtube.com/watch?v=tZNaNfAzfIA" target=_blank>https://www.youtube.com/watch?v=tZNaNfAzfIA</a>
				</p>
				<p>
	This is because they use the same chord progression (see section <a href="#1f">1.f</a>). 
				</p>
				<p>
	You can make a playlist to using same chord progression in a minor key, moving to similar songs in a major key (see section <a href="#1g">1.g</a>)
				</p>
				<p>
	That should have the effect of cheering you up - making you feel happy. 
				</p>
			</div>

			<div class="heading" id="2b">
				<h5>
	b. Compare chord progressions
				</h5>
			</div>
			
			<div class="explanation">
				<p>
	For songs in the same key, you can just compare the chords. 
				</p>
				<p>
	If the songs are in a different key, you can't compare the chords directly - you have to know the key, and then transpose to Roman Numerals. 
				</p>
				<p>
	If you don't know the key, you can't transpose even if you know the chords. 
				</p>
				<p>
	If you only have an MP3, this problem is "hard". Extracting chords is usually done by hand by talented musicians. 
				</p>
				<p>
	Sometimes even the experts don't know what chord is being played, e.g. <a href="https://www.youtube.com/watch?v=fG2evigIJIc" target=_blank>A Hard Days Night - The Beatles</a>. 
				</p>
				<p>
				<a href="http://www.abc.net.au/news/science/2017-11-05/a-hard-days-night-how-mathematics-revealed-beatles-secret/9093348" target=_blank>http://www.abc.net.au/news/science/2017-11-05/a-hard-days-night-how-mathematics-revealed-beatles-secret/9093348</a>
				</p>
			</div>

			<div class="heading" id="2c">
				<h5>
	c. Extracting chords from MP3s
				</h5>
			</div>

			<div class="explanation">
				<p>
	Existing software to take an MP3 and generate chords doesn't work well. Instruments interfere with each other, and frequencies are all over the spectrum. 
				</p>
				<p>
	Melodyne doesn't get the chords - only the notes. Each chord is made of 3 notes. Then you need to figure out the chords from the notes. 
				</p>
				<p>
	It's helpful for figuring out a Parsons code, but it's slow and wouldn't be able to process my large iTunes library. 
				</p>
				<p>
	Melodyne also uses a lot of ad-tracking cookies, so you'll see their adverts everywhere on the Internet if you visit their page. You have been warned. 
				</p>
				<p>
				<a href="http://www.celemony.com/en/melodyne/what-can-melodyne-do" target=_blank>http://www.celemony.com/en/melodyne/what-can-melodyne-do</a>
				</p>
				<p>
	Capo is a program that uses machine learning to try to guess chords. I tried it briefly, but got very different results to some human-written chord charts. 
				</p>
				<p>
				<a href="http://supermegaultragroovy.com/products/capo/mac/" target=_blank>http://supermegaultragroovy.com/products/capo/mac/</a>
				</p>
				<p>
	Shazam can search a large database of MP3s using audio fingerprints and machine learning. This isn't analysing chords, but it can handle the large databases of MP3s. 
				</p>
				<p>
	How does it work? There's a technical article about that by Christophe:
				</p>
				<p>
				<a href="http://coding-geek.com/how-shazam-works/" target=_blank>http://coding-geek.com/how-shazam-works/</a>
				</p>
			</div>

			<div class="heading" id="2d">
				<h5>
	d. Comparing frequencies
				</h5>
			</div>

			<div class="explanation">
				<p>
	If you want to write your own chord analyser, you can use a Fast Fourier Transform (FFT) to find the loudest frequencies. 
				</p>
				<p>
	You can then compare the frequencies with the notes in the Scientific Pitch Notation table. 
				</p>
				<p>
				<a href="https://en.wikipedia.org/wiki/Scientific_pitch_notation#Table_of_note_frequencies" target=_blank>https://en.wikipedia.org/wiki/Scientific_pitch_notation#Table_of_note_frequencies</a>
				</p>
				<p>
	I think this is how Melodyne works. 
				</p>
				<p>
	If an instrument is not tuned correctly, the frequencies will be a bit different than they should be in order to get a certain note. 
				</p>
				<p>
	I don't know about the different tunings (e.g. drop-D on a guitar), and how they affect the data here. That's an area I'd need to research some more. 
				</p>
				<p>
	The frequencies for all 2401 possible chord progressions are listed in the <a href="Frequencies/Frequencies.zip" target=_blank>Frequencies</a> folder. 
				</p>
			</div>

			<div class="heading" id="3">
				<h3>
	3. How do we use music theory to improve machine learning?
				</h3>
			</div>
			
						
			<div class="explanation">
				<p>
					<b>
	<a href="#3a">a. How machine learning works</a>
					</b>
				</p>
				<p>
					<b>
	<a href="#3b">b. Getting structured data</a>
					</b>
				</p>
				<p>
					<b>
	<a href="#3c">c. Converting MID to MP3</a>
					</b>
				</p>
				<p>
					<b>
	<a href="#3d">d. Separating instruments from a track</a>
					</b>
				</p>
				<p>
					<b>
	<a href="#3e">e. I forgot something</a>
					</b>
				</p>
				<p>
					<b>
	<a href="#3f">f. File list and brief description</a>
					</b>
				</p>
			</div>

			<div class="heading" id="3a">
				<h5>
	a. How machine learning works
				</h5>
			</div>
			
			<div class="explanation">
				<p>
	If you have lots of examples of something, machine learning can automatically look for patterns. 
				</p>
				<p>
	A machine learning program is also called a "neural net". 
				</p>
				<p>
	The "neural net" must be "trained" by putting in a lot of sorted examples.
				</p>
				<p>
	You need to have structured data. 
				</p>
				<p>
	For example, Blink 182 and The Offspring are both "Rock". If I like Blink 182, I like "Rock". Therefore maybe I will also like The Offspring. 
				</p>
				<p>
	That is how Spotify recommends music - by looking at other people's playlists and telling you what they like. 
				</p>
				<p>
				<a href="https://hackernoon.com/spotifys-discover-weekly-how-machine-learning-finds-your-new-music-19a41ab76efe" target=_blank>https://hackernoon.com/spotifys-discover-weekly-how-machine-learning-finds-your-new-music-19a41ab76efe</a>
				</p>
				<p>
	There is an audio model used by Spotify, but it is measuring "time signature, key, mode, tempo, and loudness" - not chord progression. 
				</p>
				<p>
	Make playlists for "Rock", "Pop", "Dance", "Rap", and "Classical", and if you've got enough examples, it's probably possible to suggest some good music. 
				</p>
				<p>
	But it won't always give you a good mix. Even some songs by the same artist can be different. 
				</p>
				<p>
	If I listen to <a href="https://www.youtube.com/watch?v=2Ei1-vWL-t0" target=_blank>The Unwinding Cable Car - Anberlin</a> (a slow song), I don't want to hear <a href="https://www.youtube.com/watch?v=3eshBjNfOZY" target=_blank>Audrey, Start The Revolution - Anberlin</a> (a fast song) right after. 
				</p>
				<p>
	Both songs are Rock, both have the same artist, but they're emotionally very different. 
				</p>
			</div>


			<div class="heading" id="3b">
				<h5>
	b. Getting structured data
				</h5>
			</div>

			<div class="explanation">
				<p>
	In section <a href="#1h">1.h</a>, I decided to generate 504,210 examples: 210 key/octaves for 2401 chord progressions. 
				</p>
				<p>
	That is highly structured data, and excellent for machine learning. 
				</p>
				<p>
	To build the data, I wrote an AppleScript to generate CSV files for every tune. 
				</p>
				<p>
	Each chord is played for 8 beats of 80 ms. I don't know why I chose that, it just sounds right. 
				</p>
				<p>
	This is what the "udud" Parsons code "looks like". As you can see, each chord is played 8 times, then it changes. 
				</p>
				<p>
	________--------________--------
				</p>
			</div>
			
			<img src="Images/1.5.6.4_C_4%20Aria.png" width="500px"></img>
			
			<div class="explanation">
				<p>
	I then converted the CSV files to MID using midicsv-1.1 by John Walker. 
				</p>
				<p>
	<a href="http://www.fourmilab.ch/webtools/midicsv/#Download" target=_blank>http://www.fourmilab.ch/webtools/midicsv/#Download</a>
				</p>
				<p>
	If you want to see that pattern, you can edit the MID file using Aria Maestosa. 
				</p>
				<p>
	<a href="http://ariamaestosa.sourceforge.net" target=_blank>http://ariamaestosa.sourceforge.net</a>
				</p>
				<p>
	The total size of the CSV files is over 5 GB uncompressed, or 600 MB compressed. The MID files are 2 GB uncompressed. 
				</p>
				<p>
	The MID files are 8.3 MB compressed as a tar.bz2 file. 
				</p>
				<p>
	Therefore I'm only uploading the MID files as <a href="MID.tar.bz2" target=_blank>MID.tar.bz2</a>.

				</p>
			</div>
				
				
			<div class="heading" id="3c">
				<h5>
	c. Converting MID to MP3
				</h5>
			</div>

			<div class="explanation">
				<p>
	Be warned - you need a lot of disk space! 
				</p>
				<p>
	One chord progression will generate 210 files (one for each key). That's 1.5 GB of WAV, or 100 MB of MP3 per progression. 
				</p>
				<p>
	All 2401 chord progressions therefore require about 234 GB of disk space. 
				</p>
				<p>
	That's why I'm not uploading MP3 files. 
				</p>
				<p>
	A MID file just describes the chords. It doesn't choose an instrument for you. 
				</p>
				<p>
	You need to download some instruments. I used a collection of 259 instruments called "generaluser", which is a strange name. 
				</p>
				<p>
	<a href="http://www.schristiancollins.com/generaluser.php" target=_blank>http://www.schristiancollins.com/generaluser.php</a>
				</p>
				<p>
	If you want to play a MID file, just open it using <a href="https://www.videolan.org/vlc/index.html" target=_blank>VLC</a> or (the old) <a href="https://support.apple.com/kb/dl923?locale=en_GB" target=_blank>QuickTime Player 7</a>. 
				</p>
				<p>
	If you want to convert MID to WAV, use Fluidsynth. 
				</p>
				<p>
	<a href="http://www.fluidsynth.org" target=_blank>http://www.fluidsynth.org</a>
				</p>
				<p>
	Then to convert WAV to MP3, use Lame. 
				</p>
				<p>
	<a href="http://lame.sourceforge.net" target=_blank>http://lame.sourceforge.net</a>
				</p>
				<p>
	The commands to convert to WAV and then MP3 are as follows:
				</p>
				<p>
	/opt/local/bin/fluidsynth -F "ChordProgressions/WAV/1.5.6.4_C_4.wav" -i /usr/local/share/fluidsynth/generaluser.v.1.471.sf2 "ChordProgressions/MID/1.5.6.4_C_4.mid"
				</p>
				<p>
	/usr/local/bin/lame --preset standard "ChordProgressions/WAV/1.5.6.4_C_4.wav" "ChordProgressions/MP3/1.5.6.4_C_4.mp3"
				</p>
			</div>

			<div class="heading" id="3d">
				<h5>
	d. Separating instruments from a track
				</h5>
			</div>

			<div class="explanation">
				<p>
	If example data can be generated for every instrument, it should be possible to use machine learning to split an MP3 into different instruments. 
				</p>
				<p>
	For all 2401 chord progressions played by all 259 instruments in MP3 format, that's 60 TB of data. 
				</p>
				<p>
	This data is huge. 
				</p>
				<p>
	Currently, musicians have to use a multi-track recorder. There's no way to split a single track into each instrument. 
				</p>
				<p>
	This type of audio-based machine learning might allow instrument tracks to be split out from an MP3. 
				</p>
				<p>
	That's beyond the scope of this article, though, and I'm still learning <a href="https://www.tensorflow.org" target=_blank>Tensorflow</a>. I hope someone on <a href="https://www.kaggle.com/peterburk" target=_blank>Kaggle</a> can help. 
				</p>
			</div>

			<div class="heading" id="3e">
				<h5>
	e. I forgot something
				</h5>
			</div>

			<div class="explanation">
				<p>
	That's probably true! Music is much more complicated, and there are arpeggios, 3-chord progressions, the 12-bar blues, and much more to discuss. 
				</p>
				<p>
	The purpose of this article is to share what I understand about basic music theory so computer programmers can know what's going on. 
				</p>
				<p>
	The MID data for chord progressions is provided so that machine learning experts can improve the audio models that analyse songs. 
				</p>
				<p>
	I hope that with new technology, we can teach a computer how to drum its fingers. 
				</p>
			</div>


			<div class="heading" id="3f">
				<h5>
	f. File list and brief description
				</h5>
			</div>

			<div class="explanation">
			</div>
		<table>
			<tr>
				<td>
	ChordProgressions.zip - The whole dataset. 
				</td>
			</tr>
		</table>
		<table>
			<tr>
				<td>
	Chord Progressions.scpt - The AppleScript program used to generate all the data. Contains Chord-MIDI-CSV, transposing, and Parsons code functions. 
				</td>
			</tr>
		</table>
		<table>
			<tr>
				<td>
	ChordProgressionsAll.txt - A list of all the possible chord progressions. 
				</td>
			</tr>
		</table>
		<table>
			<tr>
				<td>
	csvFoldersToMid.sh - A shell script to convert CSV to MID. 
				</td>
			</tr>
		</table>
		<table>
			<tr>
				<td>
	csvmidi - Binary of a program by John Walker that converts CSV to MID, described in section <a href="#3b">3.b</a>.
				</td>
			</tr>
		</table>
		<table>
			<tr>
				<td>
	Frequencies
				</td>
			</tr>
		</table>
		<table>
			<tr>
				<td>
				</td>
				<td>
	Frequencies.zip - The frequencies for all the chord progressions in every key and octave. 
				</td>
			</tr>
			<tr>
				<td>
				</td>
				<td>
				</td>
				<td>
	1.1.1.1.txt
				</td>
			</tr>
			<tr>
				<td>
				</td>
				<td>
				</td>
				<td>
	...
				</td>
			</tr>
			<tr>
				<td>
				</td>
				<td>
				</td>
				<td>
	7.7.7.7.txt
				</td>
			</tr>
			<tr>
				<td>
				</td>
				<td>
	MIDI Frequencies.txt - A list of MIDI notes and the frequencies. Useful if you have a spectrum analyser and want to find a note. 
				</td>
			</tr>
		</table>
		<table>
			<tr>
				<td>
	Images
				</td>
			</tr>
			<tr>
				<td>
				</td>
				<td>
		1.5.6.4_C_4 Aria.png - An example MID file as displayed in Aria Maestosa, see section <a href="#3b">3.b</a>.
				</td>
			</tr>
			<tr>
				<td>
				</td>
				<td>
		Chords and Keys.jpg - Lookup table for chords and major keys to Roman Numerals
				</td>
			</tr>
			<tr>
				<td>
				</td>
				<td>
		CircleofFifths.png - Minor/Major key conversion. 
				</td>
			</tr>
			<tr>
				<td>
				</td>
				<td>
		music_chords_in_the_key_of_a_b_c_d_e_f_g_flat_sharp_minor-727x1024.png - Lookup table for chords and minor keys to Roman Numerals
				</td>
			</tr>
			<tr>
				<td>
				</td>
				<td>
		roman-numeral-system-in-music-theory.png - Another major/minor table. 
				</td>
			</tr>
		</table>
		<table>
			<tr>
				<td>
	MID.tar.bz2 - The data we are interested in. It uses about 2 GB uncompressed, please make sure you have enough disk space. 
				</td>
			</tr>
			<tr>
				<td>
				</td>
				<td>
		1.1.1.1 - A folder for all possible chord progressions. 
				</td>
			</tr>
			<tr>
				<td>
				</td>
				<td>
		...
				</td>
			</tr>
			<tr>
				<td>
				</td>
				<td>
		1.5.6.4
				</td>
			</tr>
			<tr>
				<td>
				</td>
				<td>
				</td>
				<td>
			1.5.6.4_A_1.mid - The chord progression 1.5.6.4 I-V-vi-IV, in the key of A, MIDI octave 1. 
				</td>
			</tr>
			<tr>
				<td>
				</td>
				<td>
				</td>
				<td>
			...
				</td>
			</tr>
			<tr>
				<td>
				</td>
				<td>
				</td>
				<td>
			1.5.6.4_C_4.mid - The chord progression 1.5.6.4 I-V-vi-IV, in the key of C, MIDI octave 4. 
				</td>
			</tr>
			<tr>
				<td>
				</td>
				<td>
				</td>
				<td>
			...
				</td>
			</tr>
			<tr>
				<td>
				</td>
				<td>
				</td>
				<td>
			1.5.6.4_Gm_7.mid - The chord progression 1.5.6.4 I-V-vi-IV, in the key of Gm, MIDI octave 7. 
				</td>
			</tr>
			<tr>
				<td>
				</td>
				<td>
		...
				</td>
			</tr>
			<tr>
				<td>
				</td>
				<td>
		7.7.7.7
				</td>
			</tr>
		</table>
		<table>
			<tr>
				<td>
	midicsv-1.1 - Source code of a program by John Walker that converts CSV to MID, described in section <a href="#3b">3.b.</a>
				</td>
			</tr>
		</table>
		<table>
			<tr>
				<td>
	Notes
				</td>
			</tr>
			<tr>
				<td>
				</td>
				<td>
		Four Chords.txt - Rough notes and some lookup tables
				</td>
			</tr>
			<tr>
				<td>
				</td>
				<td>
		ii-iv-i-v.txt - More examples of songs
				</td>
			</tr>
		</table>
		<table>
			<tr>
				<td>
	Parsons
				</td>
			</tr>
			<tr>
				<td>
				</td>
				<td>
		ParsonsAll.txt - All possible Parsons codes
				</td>
			</tr>
			<tr>
				<td>
				</td>
				<td>
		ParsonsByProgression
				</td>
			</tr>
			<tr>
				<td>
				</td>
				<td>
				</td>
				<td>
			1.1.1.1 - The Parsons code for each chord progression (it is the same in every key)
				</td>
			</tr>
			<tr>
				<td>
				</td>
				<td>
				</td>
				<td>
			...
				</td>
			</tr>
			<tr>
				<td>
				</td>
				<td>
				</td>
				<td>
			7.7.7.7
				</td>
			</tr>
			<tr>
				<td>
				</td>
				<td>
		ParsonsOnlyTheoretical.txt - No chord progressions have these Parsons codes. 
				</td>
			</tr>
			<tr>
				<td>
				</td>
				<td>
		ParsonsReal.txt - At least one chord progression follows these Parsons codes. 
				</td>
			</tr>
			<tr>
				<td>
				</td>
				<td>
		ProgressionsByParsons
				</td>
			</tr>
			<tr>
				<td>
				</td>
				<td>
				</td>
				<td>
			dddu - A list of chord progressions that follow the Parsons code dddu. 
				</td>
			</tr>
			<tr>
				<td>
				</td>
				<td>
				</td>
				<td>
			...
				</td>
			</tr>
			<tr>
				<td>
				</td>
				<td>
				</td>
				<td>
			uuud
				</td>
			</tr>
		</table>
		<table>
			<tr>
				<td>
	ReadMe.txt - This document
				</td>
			</tr>
		</table>
		<table>
			<tr>
				<td>
	Wikipedia MIDI Chord Progressions - 130 of the most common chord progressions from Wikipedia. 
				</td>
			</tr>
		</table>

		</div>
	</body>
</html>
